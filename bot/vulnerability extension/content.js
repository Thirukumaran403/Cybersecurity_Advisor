// // Listen to changes when the user enters a website
// chrome.runtime.sendMessage({
//     action: 'check_website',
//     url: window.location.href
//   }, function(vulnerabilities) {
//     // Inject a popup at the bottom of the screen with results
//     const popup = document.createElement('div');
//     popup.id = "vulnerability-popup";
//     popup.style.position = "fixed";
//     popup.style.bottom = "0";
//     popup.style.left = "0";
//     popup.style.width = "100%";
//     popup.style.backgroundColor = "rgba(255, 0, 0, 0.8)";
//     popup.style.color = "white";
//     popup.style.padding = "10px";
//     popup.style.fontSize = "14px";
//     popup.style.zIndex = "9999";
//     popup.style.textAlign = "center";
//     popup.style.cursor = "pointer";
    
//     const message = vulnerabilities.length === 0
//       ? "Website is Safe!"
//       : `Website is NOT Safe! Vulnerabilities: ${vulnerabilities.join(', ')}`;
  
//     popup.innerText = message;
  
//     // Add a click event to close the popup
//     popup.onclick = () => {
//       popup.style.display = 'none';
//     };
  
//     document.body.appendChild(popup);
//   });
  // Listen to changes when the user enters a website
chrome.runtime.sendMessage({
    action: 'check_website',
    url: window.location.href
  }, function(vulnerabilities) {
    // Inject a popup at the bottom of the screen with results
    const popup = document.createElement('div');
    popup.id = "vulnerability-popup";
    popup.style.position = "fixed";
    popup.style.bottom = "0";
    popup.style.left = "0";
    popup.style.width = "100%";
    popup.style.backgroundColor = "rgba(255, 0, 0, 0.8)";
    popup.style.color = "white";
    popup.style.padding = "10px";
    popup.style.fontSize = "14px";
    popup.style.zIndex = "9999";
    popup.style.textAlign = "center";
    popup.style.cursor = "pointer";
    
    const message = vulnerabilities.length === 0
      ? "Website is Safe!"
      : `Website is NOT Safe! Vulnerabilities: ${vulnerabilities.join(', ')}`;
  
    popup.innerText = message;
  
    // Add a click event to close the popup
    popup.onclick = () => {
      popup.style.display = 'none';
    };
  
    document.body.appendChild(popup);
  });
  